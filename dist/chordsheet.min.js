(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var Item=function e(){_classCallCheck(this,e),this.chords="",this.lyrics=""};exports["default"]=Item;

},{}],2:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_item=require("./item"),_item2=_interopRequireDefault(_item),Line=function(){function e(){_classCallCheck(this,e),this.items=[],this.currentItem=null}return _createClass(e,[{key:"addItem",value:function(){var e=new _item2["default"];return this.items.push(e),this.currentItem=e,e}}]),e}();exports["default"]=Line;

},{"./item":1}],3:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),_line=require("./line"),_line2=_interopRequireDefault(_line),Song=function(){function e(){_classCallCheck(this,e),this.lines=[],this.currentLine=null}return _createClass(e,[{key:"chords",value:function(e){this.currentLine.currentItem.chords+=e}},{key:"lyrics",value:function(e){this.currentLine||this.addLine(),this.currentLine.currentItem.lyrics+=e}},{key:"addLine",value:function(){var e=new _line2["default"];return this.lines.push(e),this.currentLine=e,e}},{key:"addItem",value:function(){return this.currentLine||this.addLine(),this.currentLine.addItem()}}]),e}();exports["default"]=Song;

},{"./line":2}],4:[function(require,module,exports){
"use strict";function _interopRequireDefault(r){return r&&r.__esModule?r:{"default":r}}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol?"symbol":typeof r},_chord_pro_parser=require("./parser/chord_pro_parser"),_chord_pro_parser2=_interopRequireDefault(_chord_pro_parser),_chord_sheet_parser=require("./parser/chord_sheet_parser"),_chord_sheet_parser2=_interopRequireDefault(_chord_sheet_parser),_text_formatter=require("./formatter/text_formatter"),_text_formatter2=_interopRequireDefault(_text_formatter),_html_formatter=require("./formatter/html_formatter"),_html_formatter2=_interopRequireDefault(_html_formatter),_chord_pro_formatter=require("./formatter/chord_pro_formatter"),_chord_pro_formatter2=_interopRequireDefault(_chord_pro_formatter),ChordSheetJS={ChordProParser:_chord_pro_parser2["default"],ChordSheetParser:_chord_sheet_parser2["default"],TextFormatter:_text_formatter2["default"],HtmlFormatter:_html_formatter2["default"],ChordProFormatter:_chord_pro_formatter2["default"]};"object"==("undefined"==typeof window?"undefined":_typeof(window))&&(window.ChordSheetJS=ChordSheetJS),exports["default"]=ChordSheetJS;

},{"./formatter/chord_pro_formatter":5,"./formatter/html_formatter":7,"./formatter/text_formatter":8,"./parser/chord_pro_parser":9,"./parser/chord_sheet_parser":10}],5:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_formatter_base=require("./formatter_base"),_formatter_base2=_interopRequireDefault(_formatter_base),NEW_LINE="\n",ChordProFormatter=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return e.dirtyLine=!1,e}return _inherits(t,e),_createClass(t,[{key:"formatItem",value:function(e){e.chords&&this.output("["+e.chords+"]"),this.output(e.lyrics),this.dirtyLine=!0}},{key:"endOfSong",value:function(){this.newLine()}},{key:"newLine",value:function(){this.output(NEW_LINE)}}]),t}(_formatter_base2["default"]);exports["default"]=ChordProFormatter;

},{"./formatter_base":6}],6:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),FormatterBase=function(){function t(){_classCallCheck(this,t),this.stringOutput=""}return _createClass(t,[{key:"output",value:function(t){this.stringOutput+=t}},{key:"format",value:function(t){var e=this;return t.lines.forEach(function(t){e.newLine(),t.items.forEach(function(t){e.formatItem(t)})}),this.endOfSong(),this.stringOutput}}]),t}();exports["default"]=FormatterBase;

},{}],7:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_formatter_base=require("./formatter_base"),_formatter_base2=_interopRequireDefault(_formatter_base),SPACE="&nbsp;",HtmlFormatter=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return e.dirtyLine=!1,e.lineEmpty=!0,e.chordsLine="",e.lyricsLine="",e}return _inherits(t,e),_createClass(t,[{key:"formatItem",value:function(e){var t=e.chords.trim(),r=e.lyrics.trim();(t.length||r.length)&&(t.length>r.length?t+=SPACE:r.length>t.length&&(r+=SPACE),this.chordsLine+=this.cell("chord",t),this.lyricsLine+=this.cell("lyrics",r)),this.dirtyLine=!0}},{key:"finishLine",value:function(){var e=this.row(this.chordsLine)+this.row(this.lyricsLine);this.output(this.table(e)),this.chordsLine="",this.lyricsLine=""}},{key:"newLine",value:function(){this.dirtyLine&&this.finishLine()}},{key:"endOfSong",value:function(){this.dirtyLine&&this.finishLine()}},{key:"cell",value:function(e,t){return'<td class="'+e+'">'+t+"</td>"}},{key:"row",value:function(e){var t=e?"":' class="empty-line"';return"<tr"+t+">"+e+"</tr>"}},{key:"table",value:function(e){return"<table>"+e+"</table>"}}]),t}(_formatter_base2["default"]);exports["default"]=HtmlFormatter;

},{"./formatter_base":6}],8:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_formatter_base=require("./formatter_base"),_formatter_base2=_interopRequireDefault(_formatter_base),NEW_LINE="\n",TextFormatter=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return e.dirtyLine=!1,e.chordsLine="",e.lyricsLine="",e}return _inherits(t,e),_createClass(t,[{key:"finishLine",value:function(){var e="";this.chordsLine.trim().length&&(e+=this.chordsLine+NEW_LINE),e+=this.lyricsLine+NEW_LINE,this.output(e),this.chordsLine="",this.lyricsLine=""}},{key:"endOfSong",value:function(){this.dirtyLine?this.finishLine():this.output(NEW_LINE)}},{key:"newLine",value:function(){this.dirtyLine&&this.finishLine()}},{key:"padString",value:function(e,t){for(var r=e.length;t>r;r++,e+=" ");return e}},{key:"formatItem",value:function(e){var t=e.chords.length;t&&t++;var r=Math.max(t,e.lyrics.length);this.chordsLine+=this.padString(e.chords,r),this.lyricsLine+=this.padString(e.lyrics,r),this.dirtyLine=!0}}]),t}(_formatter_base2["default"]);exports["default"]=TextFormatter;

},{"./formatter_base":6}],9:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},_parser_base=require("./parser_base"),_parser_base2=_interopRequireDefault(_parser_base),_song=require("../chord_sheet/song"),_song2=_interopRequireDefault(_song),NEW_LINE="\n",SQUARE_START="[",SQUARE_END="]",CURLY_START="{",CURLY_END="}",COLON=":",ChordProParser=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return e.currentState=e.state("readLyrics",function(){e.on(NEW_LINE,function(){e.song.addLine()}),e.on(SQUARE_START,function(){e.song.addItem(),e.transitionTo("readChords")}),e.on(CURLY_START,function(){e.transitionTo("readTagName")}),e["else"](function(t){e.song.lyrics(t)})}),e.state("readChords",function(){e.ignore(NEW_LINE,SQUARE_START),e.on(SQUARE_END,function(){e.transitionTo("readLyrics")}),e["else"](function(t){e.song.chords(t)})}),e.state("readTagName",function(){e.on(COLON,function(){e.transitionTo("readTagValue")}),e.on(CURLY_END,function(){e.finishTag(),e.transitionTo("readLyrics")}),e["else"](function(t){e.tagName+=t})}),e.state("readTagValue",function(){e.on(CURLY_END,function(){e.finishTag(),e.transitionTo("readLyrics")}),e["else"](function(t){e.tagValue+=t})}),e}return _inherits(t,e),_createClass(t,[{key:"finishTag",value:function(){this.debug("Tag: "+this.tagName+" = "+this.tagValue),this.tagName="",this.tagValue=""}},{key:"parse",value:function(e){return this.song=new _song2["default"],this.tagName="",this.tagValue="",_get(Object.getPrototypeOf(t.prototype),"parse",this).call(this,e),this.song}}]),t}(_parser_base2["default"]);exports["default"]=ChordProParser;

},{"../chord_sheet/song":3,"./parser_base":12}],10:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,s){for(var t=0;t<s.length;t++){var i=s[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(s,t,i){return t&&e(s.prototype,t),i&&e(s,i),s}}(),_parser_base=require("./parser_base"),_parser_base2=_interopRequireDefault(_parser_base),_song=require("../chord_sheet/song"),_song2=_interopRequireDefault(_song),WHITE_SPACE=/\s/,NEW_LINE="\n",CHORD_LINE_REGEX=/^\s*((([A-G])(#|b)?([^\/\s]*)(\/([A-G])(#|b)?)?)(\s|$)+)+(\s|$)+/,ChordSheetParser=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"parse",value:function(e){this.initialize(e);for(var s=0,t=this.lines.length;t>s;s++){var i=this.lines[s];if(0==i.trim().length)this.songLine=this.song.addLine(),this.songItem=null;else{if(this.songItem=this.songLine.addItem(),CHORD_LINE_REGEX.test(i)){var n=this.lines[s+1];this.parseLine(i,n),s++}else this.songItem.lyrics=i+"";this.songLine=this.song.addLine()}}return this.song}},{key:"initialize",value:function(e){this.song=new _song2["default"],this.lines=e.split("\n"),this.songLine=this.song.addLine(),this.processingText=!1,this.isChordsLine=!0}},{key:"parseLine",value:function(e,s){this.processCharacters(e,s),this.songItem.lyrics+=s.substring(e.length),this.songItem.chords=this.songItem.chords.trim(),this.songItem.lyrics=this.songItem.lyrics.trim(),s.trim().length||(this.songLine=this.song.addLine())}},{key:"processCharacters",value:function(e,s){for(var t=0,i=e.length;i>t;t++){var n=e[t];WHITE_SPACE.test(n)?this.processingText=!1:(this.processingText||(this.songItem=this.songLine.addItem(),this.processingText=!0),this.songItem.chords+=n);var r=s[t]||"";this.songItem.lyrics+=r}}}]),e}();exports["default"]=ChordSheetParser;

},{"../chord_sheet/song":3,"./parser_base":12}],11:[function(require,module,exports){
"use strict";function _classCallCheck(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var ElseClass=function s(){_classCallCheck(this,s)};exports["default"]=new ElseClass;

},{}],12:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_else=require("./else"),_else2=_interopRequireDefault(_else),ParserBase=function(){function t(){_classCallCheck(this,t),this.cursor=0,this.debugging=!1,this.waitForExpr=null,this.state={},this.namelessConditionIndex=0,this.currentState=null}return _createClass(t,[{key:"waitFor",value:function(t){this.waitForExpr=t}},{key:"error",value:function(t){console.error(t)}},{key:"debug",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1];if(this.debugging){for(var i="",n=0;e>n;n++,i+="    ");console.log(i+t)}}},{key:"handleWaitForExpr",value:function(t){this.testCondition(this.waitForExpr,t)?(this.debug("Was waiting for "+this.waitForExpr+", now found",1),this.waitForExpr=null):this.debug("Still waiting for "+this.waitForExpr,1)}},{key:"char",value:function(t){switch(t){case"\n":return"<NEW LINE>";case" ":return"<SPACE>";default:return t}}},{key:"parse",value:function(t){var e=t.length;for(this.cursor=0;this.cursor<e;this.cursor++){var i=t[this.cursor];this.debug(this["char"](i)+" #####"),this.waitForExpr?this.handleWaitForExpr(i):(this.debug("No expression to wait for, testing conditions",1),this.testConditions(i))}}},{key:"getNewState",value:function(t,e){var i=e.call(this,t);return i&&i!=this.currentState&&i instanceof ParserState?this.currentState=i:null}},{key:"retryWith",value:function(t){return this.cursor--,this.transitionTo(t)}},{key:"transitionTo",value:function(t){return this.currentState=this.states[t]}},{key:"testConditions",value:function(t){var e=this;this.currentState.conditions.forEach(function(i){if(e.debug("Condition "+i.condition,1),e.testCondition(i.condition,t)){var n=null;e.debug("Matches condition, calling callback"+i.callback,2),(n=e.getNewState(t,i.callback))?e.debug("New state: "+n.name,1):e.debug("State remains "+e.currentState.name)}})}},{key:"testCondition",value:function(t,e){if(t===_else2["default"])return this.debug("Condition is ELSE conditions, so condition matches",3),!0;if(t instanceof RegExp){if(t.test(e))return this.debug(e+" matches regex "+t,3),!0}else if("string"==typeof t){if(t==e)return this.debug(e+" equals string "+this["char"](t),3),!0}else this.debug("Invalid condition "+t,3);return!1}},{key:"state",value:function(t,e){this.states[t]=new ParseState(t,e)}}]),t}();exports["default"]=ParserBase;

},{"./else":11}]},{},[4]);
